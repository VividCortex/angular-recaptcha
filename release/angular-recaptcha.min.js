/**
 * angular-recaptcha build:2014-12-22 
 * https://github.com/vividcortex/angular-recaptcha 
 * Copyright (c) 2014 VividCortex 
**/

!function(a){"use strict";a.module("vcRecaptcha",[])}(angular),function(a){"use strict";var b=a.module("vcRecaptcha");b.service("vcRecaptchaService",["$timeout","$window","$q",function(b,c,d){function e(){return g?d.when(g):i}function f(){if(!g)throw new Error("reCaptcha has not been loaded yet.")}var g,h=d.defer(),i=h.promise;return c.vcRecapthaApiLoaded=function(){g=c.grecaptcha,h.resolve(g)},a.isDefined(c.grecaptcha)&&c.vcRecapthaApiLoaded(),{create:function(a,b,c,d){return d.callback=c,d.sitekey=b,e().then(function(b){return b.render(a,d)})},reload:function(a){f(),g.reset(a)},getResponse:function(a){return f(),g.getResponse(a)}}}])}(angular),function(a){"use strict";function b(){throw new Error('You need to set the "key" attribute to your public reCaptcha key. If you don\'t have a key, please get one from https://www.google.com/recaptcha/admin/create')}var c=a.module("vcRecaptcha");c.directive("vcRecaptcha",["$log","$timeout","vcRecaptchaService",function(a,c,d){return{restrict:"A",scope:{key:"=",onCreate:"&",onSuccess:"&"},link:function(a,c,e){e.hasOwnProperty("key")||b(),a.widgetId=null;var f=a.$watch("key",function(g){if(g){40!==g.length&&b();var h=function(){a.onSuccess({response:d.getResponse(a.widgetId)})};d.create(c[0],a.key,h,{theme:e.theme||null}).then(function(b){a.widgetId=b,a.onCreate({widgetId:a.widgetId})}),f()}})}}}])}(angular);