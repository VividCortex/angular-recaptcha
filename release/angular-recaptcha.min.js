/**
 * angular-recaptcha build:2016-04-28 
 * https://github.com/vividcortex/angular-recaptcha 
 * Copyright (c) 2016 VividCortex 
**/

!function(a){"use strict";a.module("vcRecaptcha",[])}(angular),function(a){"use strict";var b=a.module("vcRecaptcha");b.service("vcRecaptchaService",["$window","$q","$log","$interval",function(a,b,c,d){function e(){return b.when(l).then(function(){return c.debug("Returning reCatpcha window object"),k=a.grecaptcha})}function f(){if(!k)throw new Error("reCaptcha has not been loaded yet.")}function g(e){function f(){c.debug("reCaptcha script loaded, waiting for window.grecaptcha");var b=0,e=d(function(){b++,a.grecaptcha?(d.cancel(e),c.debug("window.grecaptcha exists!"),l=!0,g.resolve(i)):b>=m&&(d.cancel(e),c.error("TIMEOUT - waiting for window.grecaptcha"))},250)}l=!1;var g=b.defer(),h=document.getElementsByTagName("head")[0],i=document.createElement("script");return i.type="text/javascript",i.src=e,i.onreadystatechange=f,i.onload=f,h.appendChild(i),g.promise}function h(a,b,c,d){return d.callback=c,d.sitekey=b,e().then(function(b){return f(),b.render(a,d)})}function i(a){f(),k.reset(a)}function j(a){return f(),k.getResponse(a)}var k=null,l=!1,m=40;return{create:h,reload:i,getResponse:j,loadScript:g}}])}(angular),function(a){"use strict";function b(){throw new Error('You need to set the "key" attribute to your public reCaptcha key. If you don\'t have a key, please get one from https://www.google.com/recaptcha/admin/create')}var c=a.module("vcRecaptcha");c.directive("vcRecaptcha",["$document","$timeout","$log","vcRecaptchaService",function(a,c,d,e){return{restrict:"A",require:"?^^form",scope:{response:"=?ngModel",key:"=",theme:"=?",size:"=?",tabindex:"=?",onCreate:"&",onSuccess:"&",onExpire:"&",language:"="},link:function(a,f,g,h){function i(b){var d="https://www.google.com/recaptcha/api.js?onload=onloadCallback&render=explicit&hl="+b;e.loadScript(d).then(function(b){a.script=b;var d=function(b){c(function(){h&&h.$setValidity("recaptcha",!0),a.response=b,a.onSuccess({response:b,widgetId:a.widgetId})}),l=c(function(){h&&h.$setValidity("recaptcha",!1),a.response="",a.onExpire({widgetId:a.widgetId})},12e4)};e.create(f[0],a.key,d,{theme:a.theme||g.theme||null,tabindex:a.tabindex||g.tabindex||null,size:a.size||g.size||null}).then(function(b){h&&h.$setValidity("recaptcha",!1),a.widgetId=b,a.onCreate({widgetId:b}),a.$on("$destroy",j)}),angular.isUndefined(a.language)&&a.removeLanguageListener()})}function j(){h&&h.$setValidity("recaptcha",null),l&&(c.cancel(l),l=null),k()}function k(){f.empty(),a.script&&angular.element(a.script).remove()}g.hasOwnProperty("key")||b(),a.widgetId=null,a.script=null,a.removeLanguageListener=null;var l;a.removeLanguageListener=a.$watch("language",function(c){a.key&&40===a.key.length||b(),c?d.debug("Language changed to: "+c+" - Refreshing reCaptcha"):(d.warn("Language not defined! Using english as fallback"),c="en"),j(),i(c)})}}}])}(angular);