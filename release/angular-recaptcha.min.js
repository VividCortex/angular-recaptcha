/**
 * angular-recaptcha build:2015-08-26 
 * https://github.com/vividcortex/angular-recaptcha 
 * Copyright (c) 2015 VividCortex 
**/

!function(e){"use strict";e.module("vcRecaptcha",[])}(angular),function(e){"use strict";var t=e.module("vcRecaptcha");t.service("vcRecaptchaService",["$window","$q",function(t,n){function c(){return a?n.when(a):o}function r(){if(!a)throw new Error("reCaptcha has not been loaded yet.")}var a,i=n.defer(),o=i.promise;return t.vcRecaptchaApiLoaded=function(){a=t.grecaptcha,i.resolve(a)},e.isDefined(t.grecaptcha)&&t.vcRecaptchaApiLoaded(),{create:function(e,t,n,r){return r.callback=n,r.sitekey=t,c().then(function(t){return t.render(e,r)})},reload:function(e){r(),a.reset(e)},getResponse:function(e){return r(),a.getResponse(e)}}}])}(angular),function(e){"use strict";function t(){throw new Error('You need to set the "key" attribute to your public reCaptcha key. If you don\'t have a key, please get one from https://www.google.com/recaptcha/admin/create')}var n=e.module("vcRecaptcha");n.directive("vcRecaptcha",["$document","$timeout","vcRecaptchaService",function(e,n,c){return{restrict:"A",require:"?^^form",scope:{response:"=?ngModel",key:"=",theme:"=?",size:"=?",tabindex:"=?",onCreate:"&",onSuccess:"&",onExpire:"&",timeout:"=?"},link:function(r,a,i,o){function u(){o&&o.$setValidity("recaptcha",null),d&&(n.cancel(d),d=null),s()}function s(){angular.element(e[0].querySelectorAll(".pls-container")).parent().remove()}i.hasOwnProperty("key")||t(),r.widgetId=null;var d,l=r.$watch("key",function(e){if(e){40!==e.length&&t();var s=function(e){n(function(){o&&o.$setValidity("recaptcha",!0),r.response=e,r.onSuccess({response:e,widgetId:r.widgetId})});var t=angular.isDefined(r.timeout)?r.timeout:1200;d=n(function(){o&&o.$setValidity("recaptcha",!1),r.response="",r.onExpire({widgetId:r.widgetId})},t)};c.create(a[0],e,s,{theme:r.theme||i.theme||null,tabindex:r.tabindex||i.tabindex||null,size:r.size||i.size||null}).then(function(e){o&&o.$setValidity("recaptcha",!1),r.widgetId=e,r.onCreate({widgetId:e}),r.$on("$destroy",u)}),l()}})}}}])}(angular);