/**
 * angular-recaptcha build:2015-01-07 
 * https://github.com/vividcortex/angular-recaptcha 
 * Copyright (c) 2015 VividCortex 
**/

!function(a){"use strict";a.module("vcRecaptcha",[])}(angular),function(a){"use strict";var b=a.module("vcRecaptcha");b.service("vcRecaptchaService",["$window","$q",function(b,c){function d(){return f?c.when(f):h}function e(){if(!f)throw new Error("reCaptcha has not been loaded yet.")}var f,g=c.defer(),h=g.promise;return b.vcRecapthaApiLoaded=function(){f=b.grecaptcha,g.resolve(f)},a.isDefined(b.grecaptcha)&&b.vcRecapthaApiLoaded(),{create:function(a,b,c,e){return e.callback=c,e.sitekey=b,d().then(function(b){return b.render(a,e)})},reload:function(a){e(),f.reset(a)},getResponse:function(a){return e(),f.getResponse(a)}}}])}(angular),function(a){"use strict";function b(){throw new Error('You need to set the "key" attribute to your public reCaptcha key. If you don\'t have a key, please get one from https://www.google.com/recaptcha/admin/create')}var c=a.module("vcRecaptcha");c.directive("vcRecaptcha",["$timeout","vcRecaptchaService",function(a,c){return{restrict:"A",require:"?^^form",scope:{response:"=?ngModel",key:"=",theme:"=",onCreate:"&",onSuccess:"&",onExpire:"&"},link:function(d,e,f,g){f.hasOwnProperty("key")||b(),d.widgetId=null;var h=d.$watch("key",function(f){if(f){40!==f.length&&b();var i=function(b){a(function(){g&&g.$setValidity("recaptcha",!0),d.response=b,d.onSuccess({response:b,widgetId:d.widgetId})}),a(function(){g&&g.$setValidity("recaptcha",!1),d.response="",d.onExpire({widgetId:d.widgetId})},12e4)};c.create(e[0],f,i,{theme:d.theme||null}).then(function(a){g&&g.$setValidity("recaptcha",!1),d.widgetId=a,d.onCreate({widgetId:a})}),h()}})}}}])}(angular);